<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="description" content="Tech Wealth Guide - Learn AI, Crypto, and Tech Investing. Build your future today." />
<title>Tech Wealth Guide</title>

<!-- Favicon (inline SVG) -->
<link rel="icon" href='data:image/svg+xml;utf8,
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  <circle cx="50" cy="50" r="45" fill="%2300aaff" stroke="%23004566" stroke-width="4"/>
  <text x="50" y="60" font-size="44" text-anchor="middle" fill="%23002233" font-family="Arial, Helvetica, sans-serif">$</text>
</svg>'>

<style>
  :root{
    --bg:#f7f8fb; --card:#ffffff; --muted:#6b7280; --accent:#ff9800; --brand:#0b6ef0; --dark:#0b1220;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--dark);line-height:1.55}
  a{color:var(--brand);text-decoration:none}
  header{background:linear-gradient(90deg,#06203a,#0b2b50);color:#fff;padding:18px 16px;display:flex;align-items:center;gap:14px}
  .logo-svg{width:140px;height:auto;display:block}
  header h1{margin:0;font-size:1.2rem}
  header p{margin:0;color:#cfe3ff;font-size:0.9rem}
  nav{display:flex;gap:8px;flex-wrap:wrap;padding:10px 16px;background:#071428;justify-content:center}
  nav a{color:#fff;padding:8px 12px;border-radius:8px}
  nav a:hover{background:rgba(255,255,255,0.03);color:var(--accent)}
  .hero{background:var(--brand);color:#fff;padding:52px 16px;text-align:center}
  .container{max-width:1100px;margin:0 auto;padding:20px}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
  .card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(8,20,40,0.06)}
  h2,h3{margin:0 0 10px}
  .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer}
  .small{font-size:0.92rem;color:var(--muted)}
  .ad-placeholder{background:#f0f3f6;padding:10px;border-radius:8px;text-align:center;margin-top:10px}
  footer{background:#071428;color:#fff;padding:18px;text-align:center;margin-top:28px}
  .newsletter input[type=email]{padding:10px;border-radius:8px;border:1px solid #e2e8f0;width:70%;max-width:320px}
  .close-btn{background:#e5e7eb;border:none;padding:8px;border-radius:8px;cursor:pointer}
  .muted{color:var(--muted)}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  th,td{padding:8px;border-bottom:1px solid #f0f0f0;text-align:left}
  .modal-bg{position:fixed;inset:0;background:rgba(5,10,20,0.6);display:none;align-items:center;justify-content:center;z-index:80}
  .modal{background:var(--card);padding:18px;border-radius:10px;max-width:560px;width:94%}
  .hidden{display:none}
  .logo-text{font-weight:700;font-size:1.1rem}
  .subtitle{color:#ffd7a6}
  .ml-embedded { margin-top: 6px; } /* MailerLite embed container */
  @media(max-width:600px){header{flex-direction:column;align-items:flex-start}}
</style>

<!-- MailerLite Universal (your provided snippet) -->
<div style="display:none">
  <div class="ml-embedded" data-form="PDyzKZ"></div>
</div>
<script>
  (function(w,d,e,u,f,l,n){w[f]=w[f]||function(){(w[f].q=w[f].q||[]).push(arguments);},l=d.createElement(e),l.async=1,l.src=u,n=d.getElementsByTagName(e)[0],n.parentNode.insertBefore(l,n);})
  (window,document,'script','https://assets.mailerlite.com/js/universal.js','ml');
  ml('account', '1947917');
</script>

</head>
<body>

  <!-- Header with inline logo SVG -->
  <header>
    <svg class="logo-svg" viewBox="0 0 400 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="TechWealth Guide logo">
      <!-- small brand block -->
      <rect x="6" y="14" width="56" height="56" rx="6" fill="#ff9800"/>
      <g transform="translate(104,18)">
        <path d="M10 46 L28 10 L22 10 L34 46z" fill="#ffd23f" />
      </g>
      <g transform="translate(164,6)">
        <polygon points="30,6 42,26 30,46 18,26" fill="#82e0ff" opacity="0.95"/>
      </g>
      <g transform="translate(224,8)">
        <rect x="2" y="6" width="44" height="36" rx="2" fill="#fff" stroke="#d0d7df"/>
        <polyline points="6,36 18,26 30,32 38,14" fill="none" stroke="#ff6b6b" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
      </g>
      <text x="104" y="98" fill="#ffffff" font-family="Inter, Arial" font-size="26" font-weight="700">TechWealth</text>
      <text x="272" y="98" fill="#ff9800" font-family="Inter, Arial" font-size="26" font-weight="700">Guide</text>
    </svg>

    <div style="flex:1">
      <h1 style="font-size:1rem;margin-bottom:6px">TechWealth Guide</h1>
      <p class="small">Making tomorrow's millionaires today — AI, Crypto & Tech Investing.</p>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <a href="#learn-ai">Learn AI</a>
    <a href="#crypto-academy">Crypto Academy</a>
    <a href="#investing-finance">Investing</a>
    <a href="#build-business">Build a Business</a>
    <a href="#tools-resources">Tools & Resources</a>
    <a href="#newsletter">Subscribe</a>
    <a href="#about">About</a>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <h2 style="font-size:1.6rem;margin-bottom:8px">Master AI, Crypto, & Tech Investing</h2>
      <p style="max-width:700px;margin:0 auto 12px">Step-by-step actionable lessons, templates, and tools to build projects and wealth. Free lessons + gated bonuses to capture high-intent leads.</p>
      <button class="btn" onclick="document.getElementById('newsletter-email').focus()">Join Newsletter</button>
    </div>
  </section>

  <main class="container">

    <div class="ad-placeholder">Demo Ad / Affiliate Banner</div>

    <!-- Trending -->
    <section id="trending" style="margin-top:18px">
      <h2>Trending Articles & Lessons</h2>
      <div class="grid" style="margin-top:12px">
        <article class="card" id="ai-for-beginners">
          <h3>AI for Beginners: Tools & Applications</h3>
          <p class="small">Practical toolset and project ideas. Bonus: prompt pack & templates (email gated).</p>
          <ul>
            <li><strong>ChatGPT (OpenAI)</strong> — prompts, API patterns, examples.</li>
            <li><strong>Claude (Anthropic)</strong> — long-form, safety-focused tasks.</li>
            <li><strong>Hugging Face</strong> — models & deployment guides.</li>
            <li><strong>Runway / DALL·E / Stable Diffusion</strong> — media & content workflows.</li>
            <li><strong>GitHub Copilot</strong> — developer productivity workflows.</li>
          </ul>
          <div style="margin-top:8px">
            <button class="btn" onclick="openGate('ai','soft')">Get Prompt Pack</button>
            <a style="margin-left:8px" class="small" href="#learn-ai">Open lessons</a>
          </div>
        </article>

        <article class="card" id="crypto-basics">
          <h3>Crypto Basics: How to Buy, Store & Trade</h3>
          <p class="small">Wallet setup, exchange safety, and a beginner trading plan. Full guide gated.</p>
          <div style="margin-top:8px">
            <button class="btn" onclick="openGate('crypto','soft')">Unlock Beginner Guide</button>
            <div style="margin-top:8px" class="ad-placeholder">Affiliate exchange promos</div>
          </div>
        </article>

        <article class="card" id="tech-investing">
          <h3>Tech Investing 101</h3>
          <p class="small">How to evaluate tech companies, size positions, and build durable portfolios. Stock analysis template gated.</p>
          <div style="margin-top:8px">
            <button class="btn" onclick="openGate('investing','soft')">Get Stock Template</button>
          </div>
        </article>
      </div>
    </section>

    <!-- Learning Paths -->
    <section id="learning-paths" style="margin-top:22px">
      <h2>Learning Paths</h2>
      <div class="grid" style="margin-top:12px">

        <div class="card" id="learn-ai">
          <h3>AI Learning Path</h3>
          <p class="small">From setup to production automations.</p>
          <ol>
            <li><strong>Lesson 1 — Intro & Tools (Open)</strong>
              <p class="small">Accounts, keys, quick wins.</p>
            </li>
            <li><strong>Lesson 2 — Prompt Engineering (Soft Gate)</strong>
              <p class="small">Downloadable prompt library (email to unlock).</p>
              <button class="btn" onclick="openGate('ai','soft')">Unlock Prompt Library</button>
            </li>
            <li><strong>Lesson 3 — Building an App (Hard Gate)</strong>
              <p class="small">Full app blueprint & deployment checklist (gated).</p>
              <button class="btn" onclick="openGate('ai','hard')">Get App Blueprint</button>
            </li>
          </ol>
        </div>

        <div class="card" id="crypto-academy">
          <h3>Crypto Learning Path</h3>
          <p class="small">Wallets, exchanges, DeFi, and yield strategies.</p>
          <ol>
            <li><strong>Lesson 1 — Wallets & Security (Open)</strong>
              <p class="small">Hardware wallets, seed phrase security.</p>
            </li>
            <li><strong>Lesson 2 — Trading Plan (Soft Gate)</strong>
              <p class="small">Trading plan & position sizing template (email gated).</p>
              <button class="btn" onclick="openGate('crypto','soft')">Get Trading Plan</button>
            </li>
            <li><strong>Lesson 3 — DeFi (Hard Gate)</strong>
              <p class="small">DeFi playbook & risk frameworks (gated).</p>
              <button class="btn" onclick="openGate('crypto','hard')">Unlock DeFi Playbook</button>
            </li>
          </ol>
        </div>

        <div class="card" id="build-business">
          <h3>Entrepreneurship Path</h3>
          <p class="small">Idea validation, GTM & monetization.</p>
          <ol>
            <li><strong>Lesson 1 — Idea to MVP (Open)</strong>
              <p class="small">Lean validation, experiments.</p>
            </li>
            <li><strong>Lesson 2 — GTM (Soft Gate)</strong>
              <p class="small">Growth templates & channel checklists (email gated).</p>
              <button class="btn" onclick="openGate('biz','soft')">Get GTM Templates</button>
            </li>
            <li><strong>Lesson 3 — Monetization (Hard Gate)</strong>
              <p class="small">Pricing & scaling blueprint (gated).</p>
              <button class="btn" onclick="openGate('biz','hard')">Get Monetization Blueprint</button>
            </li>
          </ol>
        </div>

      </div>
    </section>

    <!-- Tools & Calculators -->
    <section id="tools-resources" style="margin-top:22px">
      <h2>Tools & Calculators</h2>
      <div class="grid" style="margin-top:12px">
        <div class="card">
          <h3>Crypto Profit Calculator</h3>
          <form id="profitCalc" onsubmit="return false" style="margin-top:8px">
            <label class="small">Buy Price ($)</label><br>
            <input id="buyPrice" type="number" step="any" placeholder="e.g. 200" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <label class="small">Sell Price ($)</label><br>
            <input id="sellPrice" type="number" step="any" placeholder="e.g. 300" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <label class="small">Amount</label><br>
            <input id="amountCoins" type="number" step="any" placeholder="e.g. 1.5" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <button class="btn" onclick="calculateProfit()">Calculate</button>
          </form>
          <div id="profitResult" class="small muted" style="margin-top:8px"></div>
        </div>

        <div class="card">
          <h3>AI Startup Cost Estimator</h3>
          <form id="aiEstimator" onsubmit="return false" style="margin-top:8px">
            <label class="small">Developers</label><br>
            <input id="devs" type="number" min="0" value="2" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <label class="small">Monthly cloud & compute ($)</label><br>
            <input id="cloud" type="number" min="0" value="500" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <label class="small">ML API costs monthly ($)</label><br>
            <input id="mlcost" type="number" min="0" value="300" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <label class="small">One-time dev/design ($)</label><br>
            <input id="oneTime" type="number" min="0" value="10000" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100%"><br><br>
            <button class="btn" onclick="estimateAIStartup()">Estimate</button>
          </form>
          <div id="aiEstimateResult" class="small muted" style="margin-top:8px"></div>
        </div>

        <div class="card">
          <h3>Portfolio Tracker</h3>
          <form id="portfolioForm" onsubmit="return false" style="display:flex;gap:8px;flex-wrap:wrap">
            <input id="assetName" placeholder="Asset (e.g. BTC)" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;flex:1">
            <input id="assetQty" type="number" step="any" placeholder="Qty" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:100px">
            <input id="assetPrice" type="number" step="any" placeholder="Price" style="padding:8px;border-radius:6px;border:1px solid #e8eef8;width:120px">
            <button class="btn" onclick="addAsset()">Add</button>
          </form>
          <table id="portfolioTable"><thead><tr><th>Asset</th><th>Qty</th><th>Price</th><th>Value</th><th></th></tr></thead><tbody></tbody></table>
          <div class="small muted" style="margin-top:8px">Total: $<span id="portfolioTotal">0.00</span></div>
          <div style="margin-top:8px">
            <button class="btn" onclick="exportPortfolioCSV()">Export CSV</button>
            <button class="close-btn" onclick="clearPortfolio()">Clear</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Comparison & hosting -->
    <section id="comparison" style="margin-top:22px">
      <h2>Top Tools & Platforms</h2>
      <div class="grid" style="margin-top:12px">
        <div class="card">
          <h3>Best Crypto Exchanges</h3>
          <p class="small">Binance (advanced), Coinbase (beginner), Kraken (security)</p>
          <div style="margin-top:10px">
            <button class="btn" onclick="openGate('binance','hard')">Get Binance Referral</button>
            <div id="binanceReveal" class="small muted" style="margin-top:8px"></div>
          </div>
        </div>

        <div class="card">
          <h3>Best AI Tools for Productivity</h3>
          <ul>
            <li>OpenAI — ChatGPT & API</li>
            <li>Anthropic — Claude</li>
            <li>Google — Gemini</li>
            <li>GitHub Copilot — developer tools</li>
            <li>Hugging Face — models & datasets</li>
            <li>Runway — creative tools</li>
          </ul>
        </div>

        <div class="card">
          <h3>Top Hosting for Tech Startups</h3>
          <ul>
            <li><strong>AWS</strong> — scale & managed ML infra (SageMaker)</li>
            <li><strong>Google Cloud</strong> — Vertex AI & GCP integration</li>
            <li><strong>Azure</strong> — enterprise and ML tooling</li>
            <li><strong>DigitalOcean</strong> — cost effective droplets for prototypes</li>
            <li><strong>Vercel / Netlify</strong> — frontend/Jamstack hosting</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Newsletter (single MailerLite form + fallback) -->
    <section id="newsletter" style="margin-top:22px" class="card">
      <h2>Join Our Newsletter</h2>
      <p class="small">Free guides, gated downloads, and curated deal alerts.</p>

      <!-- Single MailerLite embedded form used across site -->
      <div id="ml-container" class="ml-embedded" data-form="PDyzKZ"></div>

      <!-- Fallback for immediate capture if ML blocked (local only) -->
      <form id="newsletterForm" onsubmit="return false" style="margin-top:10px;display:flex;gap:8px;align-items:center">
        <input id="newsletter-email" type="email" placeholder="Enter your email" required>
        <button class="btn" onclick="subscribeNewsletter()">Subscribe</button>
        <button type="button" class="close-btn" onclick="downloadSubscribers()">Download CSV</button>
      </form>
      <div id="newsletterStatus" class="small muted" style="margin-top:8px"></div>

      <div class="small muted" style="margin-top:8px">Notes: The embedded form above sends subscribers to MailerLite (form ID PDyzKZ). The page injects a hidden field `gate` automatically when gates are opened so you can create automations that trigger when `gate` equals e.g. <code>ai-soft</code> or <code>binance</code>. See instructions in the page JS comments.</div>
    </section>

    <!-- Strategic lessons -->
    <section id="content-details" style="margin-top:22px">
      <h2>Strategic Lessons (selected)</h2>
      <div class="grid">
        <div class="card">
          <h3>AI Roadmap — Strategic Lessons</h3>
          <h4>Lesson A1: Choose the Right Use Case</h4>
          <p class="small">Start with high-frequency, low-decision tasks: email summarization, customer triage, content repurposing. Build measurable KPIs (time saved, conversions improved).</p>
          <h4>Lesson A2: Prompt & Data Strategy</h4>
          <p class="small">Create a prompt library; version prompts and use a small labeled validation set to track output quality. Use system messages for guardrails and a simple prompt testing harness.</p>
          <h4>Lesson A3: Deployment & Cost Control</h4>
          <p class="small">Use caching, batching, and smaller models for common queries. Monitor token usage and set budgets. Use scheduled jobs for expensive processing (training, batch inference).</p>
        </div>

        <div class="card">
          <h3>Crypto Strategy — Strategic Lessons</h3>
          <h4>Lesson C1: Security First</h4>
          <p class="small">Hardware wallets for long-term holdings, 2FA on exchanges, withdrawal whitelists. Never keep large sums on exchanges.</p>
          <h4>Lesson C2: Position Sizing & Rationale</h4>
          <p class="small">Create thesis per asset, size positions to risk tolerance, and keep a trade journal with reasons and outcomes to iterate your strategy.</p>
          <h4>Lesson C3: DeFi Risk Management</h4>
          <p class="small">Analyze smart contract risk, TVL health, team credibility, and impermanent loss. Use small allocations for experiments.</p>
        </div>

        <div class="card">
          <h3>Tech Investing — Strategic Lessons</h3>
          <h4>Lesson T1: Growth & Engagement Metrics</h4>
          <p class="small">For product-led businesses track retention, activation, and net revenue retention. For platforms track engagement and network effects.</p>
          <h4>Lesson T2: Valuation & Defensibility</h4>
          <p class="small">Assess TAM, distribution advantages, and defensibility—data, network, integrations. Use conservative multiples for early stage.</p>
          <h4>Lesson T3: Portfolio Construction</h4>
          <p class="small">Blend core long-term positions with small tactical positions in new sectors (AI infra, DeFi). Rebalance seasonally.</p>
        </div>
      </div>
    </section>

    <!-- About / Privacy / Terms -->
    <section id="about" style="margin-top:22px" class="card">
      <h2>About TechWealth Guide</h2>
      <p class="small">We provide practical playbooks and tools for AI builders, crypto traders, and tech investors. Educational material only; not financial advice.</p>
      <p class="small">Contact: <a href="mailto:Techwealthguide1@gmail.com">Techwealthguide1@gmail.com</a></p>
    </section>

    <section id="privacy-policy" style="margin-top:12px" class="card">
      <h2>Privacy Policy (summary)</h2>
      <p class="small">We use MailerLite embedded forms to collect emails. If MailerLite is unavailable the site stores emails locally until you export them. Replace this demo policy with a legally-reviewed policy before publishing.</p>
    </section>

    <section id="terms" style="margin-top:12px" class="card">
      <h2>Terms</h2>
      <p class="small">Content is educational. Not financial advice.</p>
    </section>

  </main>

  <footer>
    <p>&copy; 2025 Tech Wealth Guide. All rights reserved.</p>
    <p class="small">Follow: <a href="https://facebook.com/Techwealthguide" target="_blank">Facebook</a> | <a href="https://www.tiktok.com/@techwealthguide" target="_blank">TikTok</a> | <a href="https://instagram.com/TechWealth.Official" target="_blank">Instagram</a></p>
  </footer>

  <!-- Modal for gates -->
  <div id="modal-bg" class="modal-bg" onclick="closeModal(event)">
    <div class="modal" id="gateModal" onclick="event.stopPropagation()">
      <h3 id="gateTitle">Unlock content</h3>
      <p id="gateDesc" class="small">Enter your email below to unlock this resource and receive our newsletter.</p>

      <!-- Local gate form (fallback) -->
      <input id="gate-email" type="email" placeholder="Your email" style="padding:10px;border-radius:8px;border:1px solid #e8eef8;width:100%"><br><br>
      <div style="display:flex;gap:8px">
        <button class="btn" onclick="submitGate()">Unlock</button>
        <button class="close-btn" onclick="hideModal()">Cancel</button>
      </div>

      <div id="gate-ml-embed" style="margin-top:12px">
        <!-- We also display the single MailerLite embedded form inside the modal; the page will inject a hidden field `fields[gate]` before MailerLite renders -->
        <div class="ml-embedded" data-form="PDyzKZ" style="margin-top:10px"></div>
      </div>

      <div id="gate-reveal" class="hidden" style="margin-top:12px"></div>
    </div>
  </div>

<script>
/*
  Single-form gating strategy (recommended):
  - Uses ONE MailerLite embedded form: data-form="PDyzKZ"
  - When a gate opens, the script sets a hidden value named fields[gate] inside the MailerLite container
    so MailerLite records the field with the subscriber. In MailerLite, create a custom field 'gate'
    and create automations that trigger when 'gate' equals 'ai-soft', 'ai-hard', 'binance', etc.
  - Also includes a local fallback that stores gate+email in localStorage so signups are never lost.
*/

/* ---------------------------
   Configuration & constants
   --------------------------- */
const ML_FORM_ID = 'PDyzKZ';                 // single MailerLite form id
const MAILERLITE_ACCOUNT = '1947917';       // your account id, included for context
const BINANCE_LINK = 'https://accounts.binance.com/register?ref=EQOGZTVS';
const BINANCE_CODE = 'EQOGZTVS';

/* ---------------------------
   Local storage helpers
   --------------------------- */
function getSubscribers(){ try{ return JSON.parse(localStorage.getItem('twg_subscribers')||'[]'); }catch(e){return []} }
function saveSubscriberLocal(email, gate){
  if(!email) return;
  const subs = getSubscribers();
  subs.push({email:email,gate:gate,date:new Date().toISOString()});
  localStorage.setItem('twg_subscribers', JSON.stringify(subs));
}
function downloadCSV(filename, rows){
  const csv = rows.map(r => r.map(c=>`"${String(c).replace(/"/g,'""')}"`).join(',')).join('\\n');
  const blob = new Blob([csv], {type:'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove();
  setTimeout(()=>URL.revokeObjectURL(url), 500);
}

/* ---------------------------
   MailerLite hidden field injection
   --------------------------- */
function injectHiddenGateField(gateValue){
  try {
    // Find all ml-embedded containers for our single form and set hidden input
    const embeds = document.querySelectorAll('.ml-embedded[data-form="' + ML_FORM_ID + '"]');
    embeds.forEach(container => {
      // remove existing hidden gate inputs (if any)
      const existing = container.querySelector('input[name="fields[gate]"]');
      if(existing) existing.remove();
      // create hidden input that MailerLite will pick up (if the embed uses standard field names)
      const input = document.createElement('input');
      input.type = 'hidden';
      input.name = 'fields[gate]';
      input.value = gateValue;
      container.appendChild(input);
    });
  } catch(e) {
    console.warn('Gate injection failed', e);
  }
}

/* ---------------------------
   Gate UX & logic
   --------------------------- */
let currentGate = {kind:'', level:''};
function openGate(kind, level){
  // kind: ai|crypto|investing|biz|binance
  // level: soft|hard
  currentGate = {kind, level};
  document.getElementById('gateTitle').textContent = (level==='soft' ? 'Unlock Bonus' : 'Unlock Advanced Guide') + ' — ' + kind.toUpperCase();
  document.getElementById('gateDesc').textContent = (level==='soft' ? 'Enter your email to receive the bonus download and our newsletter.' : 'Enter your email to receive the advanced guide and our newsletter.');
  document.getElementById('gate-email').value = '';
  document.getElementById('gate-reveal').classList.add('hidden');
  // inject hidden field so MailerLite receives which gate was triggered
  let tag = kind + '-' + level;
  if(kind === 'binance') tag = 'binance';
  injectHiddenGateField(tag);
  // show modal
  document.getElementById('modal-bg').style.display = 'flex';
}

/* close modal */
function hideModal(){ document.getElementById('modal-bg').style.display = 'none'; }
function closeModal(e){ if(e.target.id === 'modal-bg') hideModal(); }

/* submit gate -> local fallback + attempt to rely on MailerLite form if user submits it.
   We reveal the asset immediately on local save so user sees value even if ML is slow.
*/
function submitGate(){
  const email = (document.getElementById('gate-email').value || '').trim();
  if(!validateEmail(email)){ alert('Enter a valid email'); return; }
  const gateTag = (currentGate.kind === 'binance') ? 'binance' : (currentGate.kind + '-' + currentGate.level);
  // save locally as fallback
  saveSubscriberLocal(email, gateTag);
  // reveal gated content based on gate
  revealGatedContent(gateTag, email);
  // Optionally: if MailerLite embed form is visible the user can also submit that form manually.
  // The injected hidden field 'fields[gate]' should attach gateTag to the ML form submission.
  // NOTE: MailerLite embedded forms will collect subscribers directly into MailerLite.
}

/* reveal content depending on gate */
function revealGatedContent(tag, email){
  const reveal = document.getElementById('gate-reveal');
  reveal.classList.remove('hidden');
  if(tag === 'ai-soft'){
    reveal.innerHTML = '<p class="small">Prompt Pack ready. <a href="#" onclick="downloadLead(\\'ai-prompt-pack\\',\\''+email+'\\')">Download Prompt Pack (PDF)</a></p>';
  } else if(tag === 'ai-hard'){
    reveal.innerHTML = '<p class="small">AI App Blueprint ready. <a href="#" onclick="downloadLead(\\'ai-blueprint\\',\\''+email+'\\')">Download AI Blueprint (PDF)</a></p>';
  } else if(tag === 'crypto-soft'){
    reveal.innerHTML = '<p class="small">Trading Plan ready. <a href="#" onclick="downloadLead(\\'crypto-trading-plan\\',\\''+email+'\\')">Download Trading Plan (PDF)</a></p>';
  } else if(tag === 'crypto-hard'){
    reveal.innerHTML = '<p class="small">DeFi Playbook ready. <a href="#" onclick="downloadLead(\\'defi-playbook\\',\\''+email+'\\')">Download DeFi Playbook (PDF)</a></p>';
  } else if(tag === 'investing-soft'){
    reveal.innerHTML = '<p class="small">Stock Analysis Template ready. <a href="#" onclick="downloadLead(\\'stock-template\\',\\''+email+'\\')">Download Template (CSV)</a></p>';
  } else if(tag === 'investing-hard'){
    reveal.innerHTML = '<p class="small">Top Tech Picks doc ready. <a href="#" onclick="downloadLead(\\'top-tech-picks\\',\\''+email+'\\')">Download (PDF)</a></p>';
  } else if(tag === 'biz-soft'){
    reveal.innerHTML = '<p class="small">GTM Templates ready. <a href="#" onclick="downloadLead(\\'gtm-templates\\',\\''+email+'\\')">Download GTM Templates (ZIP)</a></p>';
  } else if(tag === 'biz-hard'){
    reveal.innerHTML = '<p class="small">Monetization Blueprint ready. <a href="#" onclick="downloadLead(\\'monetization-blueprint\\',\\''+email+'\\')">Download Blueprint (PDF)</a></p>';
  } else if(tag === 'binance'){
    reveal.innerHTML = '<p class="small">Binance referral ready: <a href="'+BINANCE_LINK+'" target="_blank">Open Binance (referral)</a><br>Referral code: <strong>' + BINANCE_CODE + '</strong></p>';
  } else {
    reveal.innerHTML = '<p class="small">Thanks — check your inbox for the resource. (Demo)</p>';
  }
  // hide modal after a few seconds
  setTimeout(()=>{ hideModal(); }, 2500);
}

/* demo download function (placeholder). Replace with real file delivery in production. */
function downloadLead(key, email){
  // This demo creates a tiny CSV to simulate download and logs the download in local storage
  const rows = [['download','email','date'], [key, email || 'unknown', new Date().toISOString()]];
  downloadCSV(key + '.csv', rows);
  alert('Demo download delivered. Replace this with real file hosting or signed URLs in production.');
}

/* ---------------------------
   Newsletter & fallback
   --------------------------- */
function validateEmail(e){ return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e); }

function subscribeNewsletter(){
  const el = document.getElementById('newsletter-email');
  const status = document.getElementById('newsletterStatus');
  const email = (el && el.value || '').trim();
  if(!validateEmail(email)){ status.textContent = 'Please enter a valid email.'; return; }
  saveSubscriberLocal(email,'newsletter');
  status.textContent = 'Thanks — subscribed (local fallback).';
  if(el) el.value = '';
}

/* export subscribers */
function downloadSubscribers(){
  const subs = getSubscribers();
  if(!subs.length){ alert('No subscribers saved yet.'); return; }
  const rows = [['email','gate','date'], ...subs.map(s=>[s.email,s.gate,s.date])];
  downloadCSV('subscribers.csv', rows);
}

/* ---------------------------
   Binance specific helper
   --------------------------- */
/* We reuse the same gate flow for Binance, just set gate = 'binance' and reveal the link in revealGatedContent() */

/* ---------------------------
   Calculators & portfolio
   --------------------------- */
function calculateProfit(){
  const buy = parseFloat(document.getElementById('buyPrice').value||0);
  const sell = parseFloat(document.getElementById('sellPrice').value||0);
  const amt = parseFloat(document.getElementById('amountCoins').value||0);
  if(isNaN(buy)||isNaN(sell)||isNaN(amt)){ document.getElementById('profitResult').textContent='Enter valid numbers'; return; }
  const profit = (sell - buy) * amt;
  const roi = (profit / (buy * amt)) * 100;
  document.getElementById('profitResult').textContent = 'Profit: $' + profit.toFixed(2) + ' — ROI: ' + roi.toFixed(2) + '%';
}

function estimateAIStartup(){
  const devs = Number(document.getElementById('devs').value||0);
  const cloud = Number(document.getElementById('cloud').value||0);
  const mlcost = Number(document.getElementById('mlcost').value||0);
  const oneTime = Number(document.getElementById('oneTime').value||0);
  const avgDevSalary = 6500;
  const monthly = (devs * avgDevSalary) + cloud + mlcost;
  const summary = 'Estimated monthly burn: $' + monthly.toLocaleString() + '. One-time costs: $' + oneTime.toLocaleString() + '. First-year total: $' + (monthly*12 + oneTime).toLocaleString();
  document.getElementById('aiEstimateResult').textContent = summary;
}

/* Portfolio functions */
function getPortfolio(){ try{ return JSON.parse(localStorage.getItem('twg_portfolio')||'[]'); }catch(e){return []} }
function setPortfolio(list){ localStorage.setItem('twg_portfolio', JSON.stringify(list)); }
function renderPortfolio(){
  const list = getPortfolio(); const tbody = document.querySelector('#portfolioTable tbody'); tbody.innerHTML=''; let total=0;
  list.forEach((it, idx)=>{
    const val = (parseFloat(it.qty)||0) * (parseFloat(it.price)||0);
    total += val;
    const tr = document.createElement('tr');
    tr.innerHTML = '<td>' + escapeHtml(it.name) + '</td><td>' + it.qty + '</td><td>$' + Number(it.price).toFixed(2) + '</td><td>$' + val.toFixed(2) + '</td><td><button class="close-btn" onclick="removeAsset(' + idx + ')">Remove</button></td>';
    tbody.appendChild(tr);
  });
  document.getElementById('portfolioTotal').textContent = total.toFixed(2);
}
function addAsset(){
  const name = document.getElementById('assetName').value.trim(); const qty = parseFloat(document.getElementById('assetQty').value||0); const price = parseFloat(document.getElementById('assetPrice').value||0);
  if(!name || isNaN(qty) || isNaN(price)){ alert('Enter asset name, qty and price'); return; }
  const list = getPortfolio(); list.push({name, qty, price}); setPortfolio(list); renderPortfolio();
  document.getElementById('assetName').value=''; document.getElementById('assetQty').value=''; document.getElementById('assetPrice').value='';
}
function removeAsset(i){ const list = getPortfolio(); list.splice(i,1); setPortfolio(list); renderPortfolio(); }
function clearPortfolio(){ if(!confirm('Clear portfolio?')) return; localStorage.removeItem('twg_portfolio'); renderPortfolio(); }
function exportPortfolioCSV(){ const rows=[['Asset','Qty','Price']]; getPortfolio().forEach(r=>rows.push([r.name,r.qty,r.price])); downloadCSV('portfolio.csv', rows); }
function escapeHtml(s){ return String(s).replace(/[&<>"]/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

/* ---------------------------
   Init on load
   --------------------------- */
(function init(){
  renderPortfolio();
  const subs = getSubscribers();
  if(subs.length) document.getElementById('newsletterStatus').textContent = 'Saved subscribers: ' + subs.length + ' (local demo)';
  // If MailerLite loads, it will render the embedded form(s) automatically. We already inject a hidden field on gate open.
})();
</script>

</body>
</html>